{"is_source_file": true, "format": "Python", "description": "This is a FastAPI backend service for extracting quotes from transcripts or uploaded files (txt, srt, vtt), and formatting these quotes for social media sharing. It provides endpoints for health checking, quote extraction, quote formatting, and usage documentation.", "external_files": ["fastapi", "pydantic", "re", "datetime"], "external_methods": ["fastapi.FastAPI", "fastapi.UploadFile", "fastapi.File", "fastapi.Form", "fastapi.HTTPException", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "pydantic.HttpUrl"], "published": ["health_check", "extract_quotes", "format_quotes", "usage_notes"], "classes": [{"name": "Quote", "description": "Represents a single extracted quote with optional timestamp range and confidence score."}, {"name": "ExtractRequest", "description": "Model for incoming request to extract quotes from transcript text."}, {"name": "ExtractResponse", "description": "Model for response containing list of extracted quotes."}, {"name": "FormatRequest", "description": "Model for requesting formatting of quotes for social media."}, {"name": "FormattedQuote", "description": "Represents a quote text that has been formatted for social sharing."}, {"name": "FormatResponse", "description": "Model for response containing formatted quotes."}], "methods": [{"name": "Optional[float] _parse_time_str_to_seconds(time_str: str)", "description": "Converts a timestamp string to seconds, supporting formats like 00:01:23.456.", "scope": "", "scopeKind": ""}, {"name": "List[Quote] _extract_from_srt_or_vtt(text: str, top_k: int, min_len: int, max_len: int)", "description": "Extracts quotes from SRT or VTT format transcripts, attempting to find timestamped segments.", "scope": "", "scopeKind": ""}, {"name": "List[Quote] _extract_from_plain_text(text: str, top_k: int, min_len: int, max_len: int)", "description": "Extracts quotes heuristically from plain text, prioritizing quoted snippets and sentence boundaries.", "scope": "", "scopeKind": ""}, {"name": "bool _guess_is_timed(text: str)", "description": "Heuristically determines whether a transcript likely contains timing information based on formatting.", "scope": "", "scopeKind": ""}, {"name": "str _format_quote_text(q: Quote, platform: str, hashtag: Optional[str], url: Optional[str], style: Optional[str], max_chars: Optional[int])", "description": "Formats a quote for social media based on platform-specific limits and style hints.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Health check endpoint returning service status.", "scope": "", "scopeKind": ""}, {"name": "extract_quotes( file: Optional[UploadFile] = File(None, description=\"Upload transcript file: .txt, .srt, or .vtt.\"), transcript: Optional[str] = Form(None, description=\"Raw transcript text if not uploading a file.\"), top_k: int = Form(5, description=\"Max number of quotes to return.\"), min_length: int = Form(40, description=\"Minimum quote length in characters.\"), max_length: int = Form(240, description=\"Maximum quote length in characters.\"), include_timestamps: bool = Form(False, description=\"Attempt to parse timestamps if present (SRT/VTT-like).\"), )", "description": "Endpoint to extract quotes from uploaded file or raw transcript text, with optional timestamp parsing.", "scope": "", "scopeKind": ""}, {"name": "format_quotes(payload: FormatRequest = Body(..., description=\"Formatting options and quotes to format.\"))", "description": "Endpoint to format extracted quotes for social media platforms with optional styling and auxiliary info.", "scope": "", "scopeKind": ""}, {"name": "usage_notes()", "description": "Provides general API usage notes and examples.", "scope": "", "scopeKind": ""}], "calls": ["re.match", "re.split", "re.fullmatch", "re.sub", "re.findall", "re.search"], "search-terms": ["FastAPI quote extraction", "SRT/VTT quotes", "social media formatting", "AI quote extractor", "transcript quotes API"], "state": 2, "file_id": 1, "knowledge_revision": 10, "git_revision": "7841e43605372a9f8656f2c4ac61d18bef2a492c", "revision_history": [{"9": "7841e43605372a9f8656f2c4ac61d18bef2a492c"}, {"10": "7841e43605372a9f8656f2c4ac61d18bef2a492c"}], "ctags": [{"_type": "tag", "name": "ExtractRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^class ExtractRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ExtractResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^class ExtractResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FormatRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^class FormatRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FormatResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^class FormatResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FormattedQuote", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^class FormattedQuote(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Quote", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^class Quote(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_extract_from_plain_text", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def _extract_from_plain_text(text: str, top_k: int, min_len: int, max_len: int) -> List[Quote]:$/", "language": "Python", "typeref": "typename:List[Quote]", "kind": "function", "signature": "(text: str, top_k: int, min_len: int, max_len: int)"}, {"_type": "tag", "name": "_extract_from_srt_or_vtt", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def _extract_from_srt_or_vtt(text: str, top_k: int, min_len: int, max_len: int) -> List[Quote]:$/", "language": "Python", "typeref": "typename:List[Quote]", "kind": "function", "signature": "(text: str, top_k: int, min_len: int, max_len: int)"}, {"_type": "tag", "name": "_format_quote_text", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def _format_quote_text(q: Quote, platform: str, hashtag: Optional[str], url: Optional[str], styl/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(q: Quote, platform: str, hashtag: Optional[str], url: Optional[str], style: Optional[str], max_chars: Optional[int])"}, {"_type": "tag", "name": "_guess_is_timed", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def _guess_is_timed(text: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "_parse_time_str_to_seconds", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def _parse_time_str_to_seconds(time_str: str) -> Optional[float]:$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "function", "signature": "(time_str: str)"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "confidence", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    confidence: Optional[float] = Field($/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "Quote", "scopeKind": "class"}, {"_type": "tag", "name": "end_time", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    end_time: Optional[float] = Field(None, description=\"End time in seconds, if available.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "Quote", "scopeKind": "class"}, {"_type": "tag", "name": "extract_quotes", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def extract_quotes($/", "language": "Python", "kind": "function", "signature": "( file: Optional[UploadFile] = File(None, description=\"Upload transcript file: .txt, .srt, or .vtt.\"), transcript: Optional[str] = Form(None, description=\"Raw transcript text if not uploading a file.\"), top_k: int = Form(5, description=\"Max number of quotes to return.\"), min_length: int = Form(40, description=\"Minimum quote length in characters.\"), max_length: int = Form(240, description=\"Maximum quote length in characters.\"), include_timestamps: bool = Form(False, description=\"Attempt to parse timestamps if present (SRT/VTT-like).\"), )"}, {"_type": "tag", "name": "format_quotes", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def format_quotes(payload: FormatRequest = Body(..., description=\"Formatting options and quotes /", "language": "Python", "kind": "function", "signature": "(payload: FormatRequest = Body(..., description=\"Formatting options and quotes to format.\"))"}, {"_type": "tag", "name": "formatted", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    formatted: str = Field(..., description=\"Formatted text.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "FormattedQuote", "scopeKind": "class"}, {"_type": "tag", "name": "hashtag", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    hashtag: Optional[str] = Field(None, description=\"Optional hashtag to append.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "FormatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "include_timestamps", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    include_timestamps: bool = Field(False, description=\"Attempt to parse timestamps if present /", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "ExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    items: List[FormattedQuote] = Field(..., description=\"List of formatted quote texts.\")$/", "language": "Python", "typeref": "typename:List[FormattedQuote]", "kind": "variable", "scope": "FormatResponse", "scopeKind": "class"}, {"_type": "tag", "name": "length", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    length: int = Field(..., description=\"Character length of the formatted text.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "FormattedQuote", "scopeKind": "class"}, {"_type": "tag", "name": "max_chars", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    max_chars: Optional[int] = Field($/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "FormatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "max_length", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    max_length: int = Field(240, ge=40, le=2000, description=\"Maximum quote length in characters/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "min_length", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    min_length: int = Field(40, ge=10, le=500, description=\"Minimum quote length in characters.\"/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "original", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    original: Quote = Field(..., description=\"Original quote object.\")$/", "language": "Python", "typeref": "typename:Quote", "kind": "variable", "scope": "FormattedQuote", "scopeKind": "class"}, {"_type": "tag", "name": "platform", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    platform: str = Field($/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "FormatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "quotes", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    quotes: List[Quote] = Field(..., description=\"List of extracted quotes.\")$/", "language": "Python", "typeref": "typename:List[Quote]", "kind": "variable", "scope": "ExtractResponse", "scopeKind": "class"}, {"_type": "tag", "name": "quotes", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    quotes: List[Quote] = Field(..., description=\"Quotes to format.\")$/", "language": "Python", "typeref": "typename:List[Quote]", "kind": "variable", "scope": "FormatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "source", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    source: Optional[str] = Field(None, description=\"Optional source context, e.g., speaker or f/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Quote", "scopeKind": "class"}, {"_type": "tag", "name": "start_time", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    start_time: Optional[float] = Field(None, description=\"Start time in seconds, if available.\"/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "Quote", "scopeKind": "class"}, {"_type": "tag", "name": "style", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    style: Optional[str] = Field($/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "FormatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    text: str = Field(..., description=\"The extracted quote text.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Quote", "scopeKind": "class"}, {"_type": "tag", "name": "top_k", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    top_k: int = Field(5, ge=1, le=50, description=\"Maximum number of quotes to return.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "transcript", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    transcript: str = Field(..., description=\"Raw transcript text.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^    url: Optional[HttpUrl] = Field(None, description=\"Optional URL to include.\")$/", "language": "Python", "typeref": "typename:Optional[HttpUrl]", "kind": "variable", "scope": "FormatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "usage_notes", "path": "/home/kavia/workspace/code-generation/quoteextractor-for-social-media-221-232/backend/src/api/main.py", "pattern": "/^def usage_notes():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "7cfc162ee370fb2d949dc7fc6da1ff40", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[float] confidence", "scope": "Quote", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] end_time", "scope": "Quote", "scopeKind": "class", "description": "unavailable"}, {"name": "str formatted", "scope": "FormattedQuote", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] hashtag", "scope": "FormatRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "bool include_timestamps", "scope": "ExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[FormattedQuote] items", "scope": "FormatResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int length", "scope": "FormattedQuote", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] max_chars", "scope": "FormatRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int max_length", "scope": "ExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int min_length", "scope": "ExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Quote original", "scope": "FormattedQuote", "scopeKind": "class", "description": "unavailable"}, {"name": "str platform", "scope": "FormatRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Quote] quotes", "scope": "ExtractResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] source", "scope": "Quote", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] start_time", "scope": "Quote", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] style", "scope": "FormatRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str text", "scope": "Quote", "scopeKind": "class", "description": "unavailable"}, {"name": "int top_k", "scope": "ExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str transcript", "scope": "ExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[HttpUrl] url", "scope": "FormatRequest", "scopeKind": "class", "description": "unavailable"}]}